<?php
/**
 * This file is part of the {@link http://ontowiki.net OntoWiki} project.
 *
 * @copyright Copyright (c) 2011, {@link http://aksw.org AKSW}
 * @license http://opensource.org/licenses/gpl-license.php GNU General Public License (GPL)
 */

/**
 * aksw.org project template
 *
 * arranges the content for the project class
 */

// prepare hookline and abstract (both optional)
$hookline = $this->literal(array(
    'property' => 'aksw:hookline',
    'class' => 'hookline',
    'prefix' => '<span class="hideme">:</span> '
));
$abstract = $this->literal(array(
    'property' => 'dcterms:abstract',
    'tag' => 'p',
    'class' => 'abstract'
));

// prepare the single image screenshot
// TODO: insert first pic big and thumbs for all, javascriptify this lates to enable switching between pics
$singleImage = $this->img(array(
    //'src'      => 'http://dummyimage.com/1024x768.png',
    //'uri'      => 'http://aksw.org/Projects/OntoWiki',
    'property' => 'ov:screenshot',
    'filter'   => 'Resize-width-300',
    'alt'      => 'screenshot',
    'class'    => 'depiction',
    'prefix'   => '<div class="widget_depictions"><div class="widget_depictions_big">'.PHP_EOL,
    'suffix'   => '</div></div>'.PHP_EOL
));

// prepare button row
$query = '
PREFIX aksw: <http://aksw.org/schema/>
SELECT DISTINCT ?resourceUri ?label ?propertyUri
WHERE {
    <'.$this->resourceUri.'> ?propertyUri ?resourceUri.
    ?propertyUri aksw:buttonLabel ?label
}';
$buttons = $this->querylist($query, 'aksw2011/items/buttons.phtml');

?>
<header class="intro">
    <h1><?php echo $this->title . $hookline ?></h1>
    <?php echo $singleImage ?>
    <?php echo $abstract ?>
    <?php echo $buttons ?>
</header> <!-- /.intro -->
<?php
echo $this->literal(array('tag' => 'div', 'class' => 'content')); // uses default content properties

